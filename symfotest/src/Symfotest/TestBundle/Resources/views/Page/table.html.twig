{% extends '::base.html.twig' %}
    {#{% block javascripts  %}#}
        {#{{ parent() }}#}
        {#<script type="text/javascript">#}
            {#$(document).ready(function(){#}
                {#$('.comment-form input').removeAttr('value');#}

                {#var $form = $('.comment-form'),#}
                    {#action = $form.attr('action');#}
                {#$form.submit(function(){#}
                   {#var data = $form.serialize();#}
                    {#$.ajax({#}
                        {#type: "POST",#}
                        {#url: action,#}
                        {#dataType: 'json',#}
                        {#data: data,#}
                        {#success: function(response){#}
                            {#$('.table-container').empty().append(response);#}
                        {#},#}
                        {#error: function(data) {#}
                            {#alert('Error:' + data + ' is not valid');#}
                        {#}#}
                    {#});#}
                    {#return false;#}
                {#})#}

            {#})#}
        {#</script>#}
    {#{% endblock %}#}
{% block body %}
    {% javascripts '@SymfotestTestBundle/Resources/public/js/*' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <div class="table-container">
        <table class="table">
            <thead>
            <tr>
                <th>Author</th>
                <th>Created</th>
                <th>Website</th>
                <th>Comment</th>
                <th>Rating</th>
            </tr>
            </thead>
            <tbody>
            {% for comment in comments %}
                <tr>
                    <td><a href="{{ path('show_author', {'author': comment.author}) }}">{{ comment.author }}</a> </td>
                    <td>{% if comment.date %}{{ comment.date|date('Y-m-d') }}{% endif %}</td>
                    <td><a href="{{ path('show_site', {'site': comment.site}) }}">{{ comment.site }}</a></td>
                    <td>{{ comment.comment }}</td>
                    <td>{{ comment.rating }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% if form is defined %}
        <form class="comment-form" action="{{ path('show_all') }}" method="post" {{ form_enctype(form) }}>
            <div class="form-group">
                <label>Author Name</label>
                {{ form_widget(form.author) }}
            </div>
            <div class="form-group">
                <label>Website</label>
                {{ form_widget(form.site) }}
            </div>
            <div class="form-group">
                <label>Comment</label>
                {{ form_widget(form.comment) }}
            </div>
            <div class="form-group">
                <label>Rating</label>
                {{ form_widget(form.rating) }}
            </div>
            <button type="submit" class="btn btn-default submit-form">Submit</button>
        </form>

        <div class="modal fade" id="dialog" title="Status">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Modal title</h4>
                    </div>
                    <div class="modal-body">
                        <p>One fine body&hellip;</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    {% endif %}
    {#========================================================================#}
{% endblock %}